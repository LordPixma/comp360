(()=>{var e={};e.id=674,e.ids=[674],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},7310:e=>{"use strict";e.exports=require("url")},9369:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>c,routeModule:()=>m,tree:()=>d});var n=t(7096),r=t(6132),a=t(7284),l=t.n(a),i=t(2564),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);t.d(s,o);let d=["",{children:["admin",{children:["users",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,7257)),"d:\\DEV\\comp360\\apps\\web\\src\\app\\admin\\users\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,2594)),"d:\\DEV\\comp360\\apps\\web\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9291,23)),"next/dist/client/components/not-found-error"]}],c=["d:\\DEV\\comp360\\apps\\web\\src\\app\\admin\\users\\page.tsx"],x="/admin/users/page",u={require:t,loadChunk:()=>Promise.resolve()},m=new n.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/admin/users/page",pathname:"/admin/users",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},712:(e,s,t)=>{Promise.resolve().then(t.bind(t,1703))},1703:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>AdminUsersPage});var n=t(784),r=t(9885);function Table({children:e}){return n.jsx("table",{className:"w-full border-collapse text-sm",children:e})}function TableHeader({children:e}){return n.jsx("thead",{className:"bg-slate-50 text-left text-slate-600",children:e})}function TableBody({children:e}){return n.jsx("tbody",{className:"divide-y divide-slate-200",children:e})}function TableRow({children:e}){return n.jsx("tr",{className:"hover:bg-slate-50",children:e})}function TableHead({children:e}){return n.jsx("th",{className:"px-3 py-2 font-medium",children:e})}function TableCell({children:e}){return n.jsx("td",{className:"px-3 py-2",children:e})}var a=t(5304);let l={async get(e,s){let t=await fetch(`/api${e}`,{...s,method:"GET"});if(!t.ok)throw Error(`GET ${e} failed: ${t.status}`);return t.json()},async post(e,{json:s,...t}={}){let n=await fetch(`/api${e}`,{...t,method:"POST",headers:{"Content-Type":"application/json",...t?.headers||{}},body:s?JSON.stringify(s):t?.body});if(!n.ok)throw Error(`POST ${e} failed: ${n.status}`);return n.json().catch(()=>({}))}};var i=t(6558),o=t(3894),d=t(5830);let c=r.createContext(null);function Dialog({open:e,onOpenChange:s,children:t}){let[a,l]=r.useState(!!e);r.useEffect(()=>l(!!e),[e]);let setOpen=e=>{l(e),s?.(e)};return n.jsx(c.Provider,{value:{setOpen},children:(0,n.jsxs)("div",{"aria-hidden":!a,className:a?"":"hidden",children:[n.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:()=>setOpen(!1)}),n.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:t})]})})}function DialogTrigger({asChild:e,children:s}){let t=r.useContext(c),onClick=e=>{t&&t.setOpen(!0),r.isValidElement(s)&&s.props?.onClick?.(e)};return e&&r.isValidElement(s)?r.cloneElement(s,{onClick}):n.jsx("button",{onClick:onClick,children:s})}function DialogContent({className:e,children:s}){return n.jsx("div",{className:["bg-white rounded-lg shadow-lg w-full max-w-lg",e].filter(Boolean).join(" "),children:s})}function DialogHeader({children:e}){return n.jsx("div",{className:"p-4 border-b border-slate-200",children:e})}function DialogFooter({children:e}){return n.jsx("div",{className:"p-4 border-t border-slate-200 flex justify-end gap-2",children:e})}function DialogTitle({className:e,children:s}){return n.jsx("h2",{className:["text-xl font-semibold",e].filter(Boolean).join(" "),children:s})}function DialogDescription({children:e}){return n.jsx("p",{className:"text-slate-600 text-sm mt-1",children:e})}var x=t(8974),u=t(7505);function Checkbox({checked:e,onCheckedChange:s,...t}){return n.jsx("input",{type:"checkbox",checked:!!e,onChange:e=>s?.(e.target.checked),className:"h-4 w-4 rounded border-slate-300 text-slate-900 focus:ring-slate-400",...t})}let m=d.Ry({name:d.Z_().min(2,"Name must be at least 2 characters."),email:d.Z_().email("Invalid email address."),is_global_admin:d.O7().default(!1)});function AddUserForm({onUserAdded:e}){let[s,t]=(0,r.useState)(!1),d=(0,i.cI)({resolver:(0,o.F)(m),defaultValues:{name:"",email:"",is_global_admin:!1}});async function onSubmit(s){await l.post("/admin/users",{json:s}),e(),t(!1)}return(0,n.jsxs)(Dialog,{open:s,onOpenChange:t,children:[n.jsx(DialogTrigger,{asChild:!0,children:n.jsx(a.z,{children:"Add User"})}),(0,n.jsxs)(DialogContent,{className:"sm:max-w-[425px]",children:[(0,n.jsxs)(DialogHeader,{children:[n.jsx(DialogTitle,{children:"Add New User"}),n.jsx(DialogDescription,{children:"Create a new user and optionally grant them global admin privileges."})]}),n.jsx(x.l0,{...d,children:(0,n.jsxs)("form",{onSubmit:d.handleSubmit(onSubmit),className:"space-y-8",children:[n.jsx(x.Wi,{control:d.control,name:"name",render:({field:e})=>(0,n.jsxs)(x.xJ,{children:[n.jsx(x.lX,{children:"Name"}),n.jsx(x.NI,{children:n.jsx(u.I,{placeholder:"John Doe",...e})}),n.jsx(x.zG,{})]})}),n.jsx(x.Wi,{control:d.control,name:"email",render:({field:e})=>(0,n.jsxs)(x.xJ,{children:[n.jsx(x.lX,{children:"Email"}),n.jsx(x.NI,{children:n.jsx(u.I,{placeholder:"john.doe@example.com",...e})}),n.jsx(x.zG,{})]})}),n.jsx(x.Wi,{control:d.control,name:"is_global_admin",render:({field:e})=>(0,n.jsxs)(x.xJ,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[n.jsx(x.NI,{children:n.jsx(Checkbox,{checked:e.value,onCheckedChange:e.onChange})}),n.jsx("div",{className:"space-y-1 leading-none",children:n.jsx(x.lX,{children:"Grant Global Admin Privileges"})})]})}),n.jsx(DialogFooter,{children:n.jsx(a.z,{type:"submit",children:"Create User"})})]})})]})]})}function AdminUsersPage(){let[e,s]=(0,r.useState)([]),fetchUsers=async()=>{let e=await l.get("/admin/users"),t=await e.json();s(t)};return(0,r.useEffect)(()=>{fetchUsers()},[]),(0,n.jsxs)("div",{className:"container mx-auto py-8",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h1",{className:"text-3xl font-bold",children:"User Management"}),n.jsx(AddUserForm,{onUserAdded:fetchUsers})]}),(0,n.jsxs)(Table,{children:[n.jsx(TableHeader,{children:(0,n.jsxs)(TableRow,{children:[n.jsx(TableHead,{children:"Name"}),n.jsx(TableHead,{children:"Email"}),n.jsx(TableHead,{children:"Global Admin"}),n.jsx(TableHead,{children:"Actions"})]})}),n.jsx(TableBody,{children:e.map(e=>(0,n.jsxs)(TableRow,{children:[n.jsx(TableCell,{children:e.name}),n.jsx(TableCell,{children:e.email}),n.jsx(TableCell,{children:e.is_global_admin?"Yes":"No"}),(0,n.jsxs)(TableCell,{children:[n.jsx(a.z,{variant:"outline",size:"sm",className:"mr-2",children:"Edit"}),n.jsx(a.z,{variant:"destructive",size:"sm",children:"Delete"})]})]},e.id))})]})]})}},7257:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>l,__esModule:()=>a,default:()=>o});var n=t(5153);let r=(0,n.createProxy)(String.raw`d:\DEV\comp360\apps\web\src\app\admin\users\page.tsx`),{__esModule:a,$$typeof:l}=r,i=r.default,o=i}};var s=require("../../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),t=s.X(0,[930,854,328,334],()=>__webpack_exec__(9369));module.exports=t})();